<div class="container" *ngIf="!loading">
  <h4 class="color_titulo center-align">Carga manual de metas
    <a class="tooltipped" href="" data-position="top" data-delay="50" data-tooltip="Cambiar tipo" (click)="openModalTipoMeta($event)">{{ tipoMetaSeleccionada | minuscula }}</a>
  </h4>
  <!-- Solo para dispositivos moviles -->
  <div class="hide-on-large-only right-align">
    <a routerLink="../../../opciones" class="btn-floating  indigo lighten-1 waves-effect waves-light tooltipped" data-position="top"
      data-delay="50" data-tooltip="Opciones ETAD" (click)="regresar()">
      <i class="material-icons">
        <i class="material-icons">arrow_back</i>
      </i>
    </a>
  </div>
  <!-- Fin Solo para dispositivos moviles -->
  <div class="row">
    <div class="col s12 m12 l12 xl12">
      <form class="col s12 m12 l12 xl12" [formGroup]="formCargaManual" (ngSubmit)="openModalConfirmacion(meta, seccion)" autocomplete="off">
        <fieldset>
          <legend class="color_titulo">
            <b>Ingrese los datos:</b>
          </legend>
          <div class="row">
            <div class="col s12 m12 l6 xl6">
              <label>Etad</label>
              <select materialize="material_select" [materializeSelectOptions]="etads" formControlName="id_etad" [(ngModel)]="meta.id_etad">
                <option value="">SELECCIONE</option>
                <option *ngFor="let etad of etads" [value]="etad.id_linea">{{ etad.valor }}</option>
              </select>
              <div *ngIf="formCargaManual.controls.id_etad.errors?.required && (formCargaManual.controls.id_etad?.touched || submitted)"
                class="error">
                El etad es requerido
              </div>
            </div>
            <div class="col s12 m12 l6 xl6">
              <label>Frecuencia</label>
              <select materialize="material_select" formControlName="frecuencia" [materializeSelectOptions]="frecuencias" [(ngModel)]="meta.frecuencia"
                (ngModelChange)="changeCombo('frecuencia')">
                <option value="">SELECCIONE</option>
                <option *ngFor="let frecuencia of frecuencias" [value]="frecuencia.value">{{frecuencia.descripcion}}</option>
              </select>
              <div *ngIf="formCargaManual.controls.frecuencia.errors?.required && (formCargaManual.controls.frecuencia?.touched || submitted)"
                class="error">
                Seleccione una opcion
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col s12 m12 l3 xl3">
              <label>Año</label>
              <select materialize="material_select" formControlName="anio" [materializeSelectOptions]="anios" [(ngModel)]="meta.anio" (ngModelChange)="changeCombo('anio')">
                <option value="">SELECCIONE</option>
                <option *ngFor="let anio of anios" [value]="anio.anio">{{anio.anio}}</option>
              </select>
              <div *ngIf="formCargaManual.controls.anio.errors?.required && (formCargaManual.controls.anio?.touched || submitted)" class="error">
                Seleccione
              </div>
            </div>
            <div class="col s12 m12 l3 xl3">
              <label>Mes</label>
              <select materialize="material_select" formControlName="id_periodo" [materializeSelectOptions]="meses" [(ngModel)]="meta.id_periodo"
                (ngModelChange)="changeCombo('periodo')">
                <option value="">SELECCIONE</option>
                <option *ngFor="let mes of meses" [value]="mes.id_periodo">{{mes.descripcion_mes}}</option>
              </select>
              <div *ngIf="formCargaManual.controls.id_periodo.errors?.required && (formCargaManual.controls.id_periodo?.touched || submitted)"
                class="error">
                Seleccione
              </div>
            </div>
            <div class="col s12 m12 l6 xl6">
              <label>{{ titulo_combo }}</label>
              <select materialize="material_select" formControlName="id_option_meta" [materializeSelectOptions]="lista_temporal" [(ngModel)]="meta.id_option_meta"
                (ngModelChange)="changeCombo('lista')">
                <option value="">SELECCIONE</option>
                <option *ngFor="let item of lista_temporal" [value]="item.id">{{item.valor}}</option>
              </select>
              <div *ngIf="formCargaManual.controls.id_option_meta.errors?.required && (formCargaManual.controls.id_option_meta?.touched || submitted)"
                class="error">
                Seleccione
              </div>
            </div>
          </div>
          <div class="row">
            <div class="input-field  col s6 m6 l3 xl3">
              <input type="checkbox" formControlName="menos"  [checked]="meta.menor == 0">
              <label for="menos">Menos es mejor</label>
            </div>
            <div class="input-field  col s6 m6 l3 xl3">
              <input type="checkbox" formControlName="mas"  [checked]="meta.mas == 1">
              <label for="mas">Más es mejor</label>
              <br>
            </div>
            <div class="input-field  col s12 m12 l3 xl3">
              <label for="meta" class="active">Meta</label>
              <input id="meta" type="text" [(ngModel)]="meta.meta" formControlName="meta">
              <div *ngIf="formCargaManual.controls.meta.errors?.required && (formCargaManual.controls.meta?.touched || submitted)" class="error">
                Requiere meta
              </div>
              <div *ngIf="formCargaManual.controls.meta.errors?.pattern && (formCargaManual.controls.meta?.pattern || submitted)" class="error">
                Valor no valido
              </div>
            </div>
            <div class="input-field  col s12 m12 l3 xl3">
              <input id="unidad_medida" type="text" [value]="meta.unidad_medida" formControlName="unidad_medida">
              <label for="unidad_medida" class="active">Unidad Medida</label>
            </div>
          </div>

          <div class="row">
            <div class="input-field col offset-s1 offset-m3 offset-l2 offset-xl3">
              <a routerLink="../../../opciones" class="col btn grey lighten-1  waves-effect waves-light" type="submit" name="cancelar">Cancelar
              </a>
            </div>

            <div class="input-field col offset-m1 offset-l1 offset-xl2">
              <button class="col btn light-green darken-1 waves-effect waves-light" type="submit" name="asignar">Guardar
              </button>
            </div>
          </div>
        </fieldset>
      </form>
    </div>
  </div>

  <!-- Inicio solo para pantallas-->
  <div class="hide-on-small-only hide-on-med-only hide-on-med-and-down">
    <div class="fixed-action-btn" style="bottom: 45px; right: 24px;">
      <a routerLink="../../../opciones" class="btn-floating btn-large  indigo lighten-1 waves-effect waves-light tooltipped" data-position="top"
        data-delay="50" data-tooltip="Opciones ETAD" (click)="regresar()">
        <i class="material-icons">
          <i class="material-icons">arrow_back</i>
        </i>
      </a>
    </div>
  </div>
  <!-- Fin solo para pantallas-->
</div>
<div class="container" *ngIf="loading">
  <div id="loader-wrapper">
    <div id="loader"></div>
    <div class="loader-section section-left"></div>
    <div class="loader-section section-right"></div>
  </div>
</div>